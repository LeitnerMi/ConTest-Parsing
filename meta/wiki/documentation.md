# Alle Notebooks und Ablauf

### Notebooks

| Name                 | Beschreibung                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|----------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| control-flow         | Wie [hier](get-started.md) schon beschrieben, werden in diesem Notebook alle Parameter festgelegt. Hauptaufgabe jedoch ist es, die andere Notebooks in korrekter Reihenfolge und mit korrekten Metadaten aufzurufen.<br/><br/>Ablauf:<br/> 1. Durchlaufen des Source-Pfades und speichern aller relevanten Informationen der einzelnen Dateien für die späteren Transformationen<br/>2. Parsen der einzelnen Monitoring-Files <br/>3. Parsen der einzelnen Trace-Files<br/> 4. Zusammenfügen der Trace-Files in ein großes File<br/>5. Joinen von Monitoring-Daten und Trace-Daten |
| parsing-metrics      | Hier wird eine einzelnes Monitoring-File geladen und von der verschachtelten JSON-Struktur in eine Datatable-Struktur gebracht. Dabei werden die Zeitstempel gerundet und nicht benötigte Felder gelöscht. Weiters werden die Daten je nach Parameter stark gefiltert. Anschließen wird dieses im parquet-Format auf die Festplatte geschrieben.                                                                                                                                                                                                                                   |
| parsing-tracing      | Hier wird eine einzelnes Trace-File geladen und von der verschachtelten JSON-Struktur in eine Datatable-Struktur gebracht. Anschließend werden die Daten im parquet-Format auf die Festplatte geschrieben.                                                                                                                                                                                                                                                                                                                                                                         |
| concat_single_files  | Hiermit können Dateien, desselben Schemas zusammengefügt werden, um eine große Datei zu erstellen.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| join_metrics_tracing | Es werden sowohl Tracing-Daten, als auch Monitoring-Daten geladen und mithilfe eines Left-Joins auf Podname und Zeitpunkt gejoined. Das Ergebnis wird als csv-Datei auf die Festplatte geschrieben.                                                                                                                                                                                                                                                                                                                                                                                |

### Neo4j-Skripte

Mithilfe des Docker-Containers können die fertig transformierten Daten in Neo4j geladen werden. Dadurch erhält man
mithilfe der Browseroberfläche eine schöne Ansicht seiner Traces. Jedoch liegt auch ein Skript vor, mit welchem man den
kompletten Graphen mittels Vis.js rendern kann. Dabei erhält man ein standalone-HTML-File.

| Name           | Beschreibung                                                                                                                                                                                  |
|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| dropall-db     | Löscht die gesamte Datenbank von Neo4j.                                                                                                                                                       |
| load-db        | Lädt alle Daten in neo4j. Zuvor müssen die transformierten, finalen Daten in neo4j kopiert werden. Im Docker-Container müssen die Daten an folgender Stelle landen:<br/>/var/lib/neo4j/import |
| generate-graph | Erzeugt die HTML-Datei mit dem gesamten Graphen, welcher in Neo4j vorliegt                                                                                                                    |

Achtung: Diese Skripte sind nicht parametisiert und nur minimal. Der Input und Output Pfad muss einzeln selber angegeben
werden!